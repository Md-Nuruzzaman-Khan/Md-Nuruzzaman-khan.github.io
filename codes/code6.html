<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-74B5JE8ZZK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-74B5JE8ZZK');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Projectile Motion</title>
    <style>
        div {
            position: relative;
            display: block;
        }

        form {
            display: block;
            margin-bottom: 15px;
        }

        label {
            display: block;
            color: blue;
            font-weight: bold;
            padding: 3px;
        }

        input {
            width: 45%;
        }

        @media only screen and (orientation: landscape) {
            input {
                width: 60%;
            }

            p {
                display: none;
            }
        }

        button {
            width: 50px;
            margin-top: 3px;
            margin-bottom: 3px;
            height: 45px;
            display: block;
            font-size: 1.3em;
            border-radius: 10%;
            background-color: #5a5;
            color: white;
        }

        p {
            color: purple;
            text-align: center;
            font-family: monospace;
            font-size: 1.25em;
        }

        circle {
            fill: gray;
        }

        circle:last-child {
            r: 8 !important;
            fill: black !important;
        }
    </style>
</head>

<body>
    <h1 style="text-align: center;border-bottom: 1px solid rgb(145, 129, 129); font-family:fantasy; padding-bottom:8px">Projectile Motion</h1>
    <div>
        <form>
            <label>Velocity : <input id="velocitySlider" type="range" min="0" max="150" name="velocity" value="100" required> <span id="velocityValue">100</span> m/s</label>
            <label>Angle : <input id="angleSlider" type="range" min="0" max="90" name="angle" value="60" required> <span id="angleValue">60</span><sup> o</sup></label>
        </form>
    </div>

    <svg id="animationCanvas" height="212" width="100%" style="border:2px solid rgb(29, 109, 15);margin-right: 10wh;background-color:rgb(242, 247, 245)">
        <circle cx="9" cy="202" r="8" />
    </svg>

    <button id="startButton" onclick="startAnimation()"><i class="fa-solid fa-play"></i></button>

    <p id="instructionText">You may need to rotate your device and screen to see the object.</p>

    <script>
        const velocitySlider = document.getElementById('velocitySlider');
        const velocityValue = document.getElementById('velocityValue');
        velocitySlider.addEventListener('input', () => {
            velocityValue.textContent = velocitySlider.value;
        });

        const angleSlider = document.getElementById('angleSlider');
        const angleValue = document.getElementById('angleValue');
        angleSlider.addEventListener('input', () => {
            angleValue.textContent = angleSlider.value;
        });

        let animationInterval; // To store the interval ID

        function startAnimation() {
            const animationCanvas = document.getElementById("animationCanvas");
            animationCanvas.innerHTML = ''; // Clear previous circles
            const angleInput = document.getElementById("angleSlider");
            const initialVelocity = document.getElementById("velocitySlider").value;

            let timeStep = 0; // Represents the time in the animation
            const velocityScaled = initialVelocity * 0.1; // Scale down velocity for simulation
            const angleInRadians = angleInput.value * Math.PI / 180; // Convert angle to radians
            let positionY = 0; // Initialize Y position
            let positionX;

            // Change button to indicate animation is running
            const startButton = document.getElementById("startButton");
            startButton.innerHTML = '<i class="fa-solid fa-rotate-right"></i>';

            // Start the animation with a reduced interval for increased speed
            animationInterval = setInterval(updateAnimation, 5); // Reduced interval to 10ms

            function updateAnimation() {
                if (positionY > 200) { // Stop condition
                    clearInterval(animationInterval);
                    startButton.innerHTML = '<i class="fa-solid fa-play"></i>'; // Reset button text
                    return;
                } else {
                    positionX = velocityScaled * timeStep * Math.cos(angleInRadians) + 9;
                    positionY = 200 - (velocityScaled * timeStep * Math.sin(angleInRadians) - 0.16 * timeStep * timeStep);
                    
                    // Create a new circle element for the projectile
                    const projectileCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                    projectileCircle.setAttribute("cx", positionX);
                    projectileCircle.setAttribute("cy", positionY);
                    projectileCircle.setAttribute("r", "1.5");
                    animationCanvas.appendChild(projectileCircle); // Append the new circle to SVG

                    timeStep += 0.5; // Increased increment value for faster movement
                }
            }
        }
    </script>
</body>

</html>